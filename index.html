<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>LVN HESI Compass Practice</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:system-ui;background:#0b0f1e;color:#eaeaf0}
header{padding:16px 24px;font-size:18px;font-weight:600;background:#11162c}
main{display:grid;grid-template-columns:320px 1fr;gap:16px;padding:16px}
.panel{background:rgba(255,255,255,.05);border-radius:16px;padding:16px}
.choice{margin-top:10px;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,.15)}
pre{white-space:pre-wrap}
button{margin-top:12px;padding:10px 14px;border-radius:10px;border:none;background:#7a5cff;color:#fff}
small{opacity:.7}
.bowtie{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-top:12px}
.bowtie div{background:rgba(255,255,255,.08);padding:10px;border-radius:10px}
</style>
</head>
<body>
<header>
LVN HESI Compass Practice — NGN Mixed (Bowtie)
<br><small id="status">Loading…</small>
</header>
<main>
<div class="panel">
<button onclick="nextQ()">Next Question</button>
</div>
<div class="panel">
<h2 id="q"></h2>
<pre id="case"></pre>
<div id="bowtie"></div>
<div id="a"></div>
</div>
</main>
<script>
let QUESTIONS=[], idx=0;
fetch("./questions.json")
.then(r=>{if(!r.ok) throw new Error("questions.json not found"); return r.json();})
.then(data=>{
  QUESTIONS=data;
  document.getElementById("status").textContent = `Questions loaded: ${QUESTIONS.length}`;
  render();
})
.catch(e=>{document.getElementById("status").textContent=e.message;});

function render(){
  const q=QUESTIONS[idx];
  document.getElementById("q").textContent=q.stem || "";
  document.getElementById("case").textContent="";
  document.getElementById("bowtie").innerHTML="";
  const a=document.getElementById("a"); a.innerHTML="";
  if(q.type==="case" || q.type==="bowtie"){
    document.getElementById("case").textContent =
      "CASE:\n"+q.case.summary+"\n\nVITALS:\n"+
      Object.entries(q.case.vitals).map(e=>e.join(": ")).join("\n");
  }
  if(q.type==="bowtie"){
    const b=q.bowtie;
    document.getElementById("bowtie").innerHTML = `
      <div><strong>${b.left_prompt}</strong><br>${b.left_options.join("<br>")}</div>
      <div><strong>${b.center_prompt}</strong><br>${b.center_options.join("<br>")}</div>
      <div><strong>${b.right_prompt}</strong><br>${b.right_options.join("<br>")}</div>
    `;
  } else {
    q.choices.forEach(ch=>{
      const d=document.createElement("div");
      d.className="choice";
      d.textContent=ch;
      a.appendChild(d);
    });
  }
}
function nextQ(){ idx=(idx+1)%QUESTIONS.length; render(); }
</script>
</body>
</html>
