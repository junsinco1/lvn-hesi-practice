<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LVN HESI Practice</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- manifest disabled for debug -->
  <meta name="theme-color" content="#0b1020" />
</head>
<body>
  <div class="wrap">
    <header class="top">
      <div class="brand">
        <div class="logo">LVN</div>
        <div>
          <div class="title">HESI Compass Practice</div>
          <div class="sub">Super-difficult NGN-style practice (device-local)</div>
        </div>
      </div>

      <div class="controls card">
        <label>Topic
          <select id="topicSelect"></select>
        </label>

        <label>Difficulty
          <select id="diffSelect">
            <option value="any" selected>Any</option>
            <option value="hard">Hard</option>
            <option value="very_hard">Very hard</option>
          </select>
        </label>

        <label>Type
          <select id="typeSelect">
            <option value="any" selected>Any</option>
            <option value="single">Regular</option>
            <option value="sata">SATA</option>
            <option value="bowtie">Bowtie</option>
          </select>
        </label>

        <label>Theme
          <select id="themeSelect">
            <option value="dark" selected>Dark</option>
            <option value="purple">Purple</option>
            <option value="green">Clinical</option>
            <option value="light">Light</option>
          </select>
        </label>

        <label>Font
          <select id="fontSelect">
            <option value="0.95">Small</option>
            <option value="1.0" selected>Medium</option>
            <option value="1.1">Large</option>
            <option value="1.2">XL</option>
          </select>
        </label>

        <label class="chk">
          <input type="checkbox" id="hiContrast" /> High contrast
        </label>

        <label>Scoring
          <select id="scoringSelect">
            <option value="strict" selected>Strict</option>
            <option value="partial">NGN partial credit</option>
          </select>
        </label>

        <label>Timer
          <select id="timerSelect">
            <option value="0" selected>Off</option>
            <option value="30">30 sec</option>
            <option value="45">45 sec</option>
            <option value="60">60 sec</option>
            <option value="90">90 sec</option>
            <option value="120">120 sec</option>
          </select>
        </label>

        <div class="btnRow">
          <button id="btnPractice" class="btn primary">Next Practice</button>
          <button id="btnStartExam" class="btn danger">Start 75Q Exam</button>
          <button id="btnExamCode" class="btn">Exam Code</button>
          <button id="btnFocusWeak" class="btn">Focus Weak</button>
          <button id="btnLeaderboard" class="btn">Leaderboard</button>
          <button id="btnExport" class="btn subtle">Export (Instructor)</button>
          <button id="btnReset" class="btn subtle">Reset</button>
          <button id="btnDiag" class="btn subtle">Diagnostics</button>
        </div>

        <div id="dash" class="dash">
          <div><span class="k">Mastery</span> <span id="masteryLine">—</span></div>
          <div><span class="k">Streak</span> <span id="streakLine">0</span></div>
          <div><span class="k">Badges</span> <span id="badgesLine">—</span></div>
          <div><span class="k">Mode</span> <span id="modeLine">Practice</span></div>
          <div><span class="k">Timer</span> <span id="timerLine">Off</span></div>
        </div>

        <div class="hint">
          Tip: Use <b>Exam Code</b> to generate the same exam for everyone. Use <b>Focus Weak</b> to drill missed/weak topics.
        </div>
      </div>
    </header>

    <main class="main">
      <section class="card qcard">
        <div class="qmeta">
          <div id="qTag" class="pill">—</div>
          <div id="qTopic" class="muted">—</div>
          <div id="qWarn" class="warn"></div>
        </div>

        <div id="qStem" class="stem">Load a practice question to begin.</div>

        <div id="bowtieWrap" class="bowtie hidden">
          <div class="bowRow">
            <div class="bowCol">
              <div class="bowHead">Client problem</div>
              <select id="bowLeft"></select>
            </div>
            <div class="bowCol">
              <div class="bowHead">Priority action</div>
              <select id="bowMid"></select>
            </div>
            <div class="bowCol">
              <div class="bowHead">Expected outcome</div>
              <select id="bowRight"></select>
            </div>
          </div>
          <div class="small muted">Bowtie uses 3 linked decisions. Partial-credit scoring can be enabled.</div>
        </div>

        <div id="optionsWrap" class="options"></div>

        <div class="actions">
          <button id="btnSubmit" class="btn primary" disabled>Submit</button>
          <button id="btnShowRationale" class="btn" disabled>Rationale</button>
        </div>

        <div id="scoreLine" class="scoreLine">Score: 0/0</div>
      </section>

      <section class="card tabs">
        <div class="tabRow">
          <button class="tab active" data-tab="case">Case</button>
          <button class="tab" data-tab="vitals">Vitals</button>
          <button class="tab" data-tab="nurse">Nurse Did</button>
          <button class="tab" data-tab="orders">Provider Orders</button>
          <button class="tab" data-tab="rationale">Rationale</button>
        </div>

        <div id="pane_case" class="pane">—</div>
        <div id="pane_vitals" class="pane hidden">—</div>
        <div id="pane_nurse" class="pane hidden">—</div>
        <div id="pane_orders" class="pane hidden">—</div>
        <div id="pane_rationale" class="pane hidden">—</div>
      </section>
    </main>
  </div>

  <dialog id="dlg">
    <form method="dialog" class="dlg">
      <h3 id="dlgTitle">Info</h3>
      <div id="dlgBody" class="dlgBody"></div>
      <div class="dlgActions">
        <button class="btn primary" value="ok">OK</button>
      </div>
    </form>
  </dialog>

  <dialog id="dlgExamCode">
    <form method="dialog" class="dlg">
      <h3>Exam Code</h3>
      <div class="dlgBody">
        <div class="small">Set an exam code to create the <b>same 75Q exam</b> for everyone.</div>
        <label style="display:block; margin-top:10px;">Code
          <input id="examCodeInput" maxlength="32" placeholder="e.g., LVN-APRIL-A" />
        </label>
        <div class="small" style="margin-top:10px;">Leave blank to return to random exams.</div>
      </div>
      <div class="dlgActions">
        <button value="cancel" class="btn">Cancel</button>
        <button value="ok" class="btn primary">Use</button>
      </div>
    </form>
  </dialog>

  <dialog id="dlgInstructor">
    <form method="dialog" class="dlg">
      <h3>Instructor Mode</h3>
      <div class="dlgBody">
        <div class="small">Enter instructor code to unlock exports on this device. First unlock sets the code.</div>
        <label style="display:block; margin-top:10px;">Instructor code
          <input id="instrCodeInput" maxlength="32" />
        </label>
      </div>
      <div class="dlgActions">
        <button value="cancel" class="btn">Cancel</button>
        <button value="ok" class="btn primary">Unlock</button>
      </div>
    </form>
  </dialog>

  <script src="app.js?v=44"></script>
</body>
</html>
